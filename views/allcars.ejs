<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>All Cars</title>
  <link rel="stylesheet" href="/css/common_styles.css" />
  <link rel="stylesheet" href="/css/allcarsfull.css" />
</head>

<body>
  <!-- NAVBAR -->
  <nav>
    <div class="logo">Turbo Motors</div>
    <ul class="nav-links">
      <li><a href="/home">Home</a></li>
      <li><a href="/allcars">All Cars</a></li>
      <li><a href="/about">About Us</a></li>
      <li><a href="/contact">Contact</a></li>
      <% if (user) { %>
        <li><a href="/logout" class="btn">Logout</a></li>
        <li><a href="#" class="btn">Hi, <%= user.name %></a></li>
      <% } else { %>
        <li><a href="/login" class="btn">Sign In</a></li>
        <li><a href="/signup" class="btn">Sign Up</a></li>
      <% } %>
    </ul>
  </nav>

  <!-- MAIN CONTENT -->
  <main>
    <div class="allcars-container">
      <h1 class="section-title">All Cars</h1>
    </div>
    <div class="car-grid">
      <% cars.forEach(car => { %> <!-- Loop through cars array -->
        <div class="car-box" onclick="openModal(this)"
          data-id="<%= car._id %>"   <!-- Pass the car's id here -->
          data-name="<%= car.brand %> <%= car.model %>"
          data-type="<%= car.group %>"
          data-engine="<%= car.engineSize %>"
          data-doors="<%= car.doors %>"
          data-passengers="<%= car.passengers %>"
          data-fuel="<%= car.fuel %>"
          data-gearbox="<%= car.gearbox %>"
          data-ac="<%= car.ac ? 'Yes' : 'No' %>"
          data-img="<%= car.image %>">
          <img src="/images/<%= car.image %>" alt="<%= car.brand %>">
          <p class="car-name"><%= car.brand %> <%= car.model %></p>
        </div>
      <% }); %>  <!-- End of loop -->
    </div>
  </main>

  <!-- FOOTER -->
  <footer>
    <div class="footer-content">
      <p>&copy; 2025 Turbo Motors. All Rights Reserved.</p>
      <p>Follow us on social media:</p>
      <div class="social-icons">
        <a href="#"><i class="fab fa-facebook"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-linkedin"></i></a>
      </div>
    </div>
  </footer>
 
  
  
  
  
<script>
 // Open Modal function
 function openModal(carBox) {
  const carId = carBox.getAttribute('data-id');  // Get the carId from the clicked car-box

  // Fetch car details from the server using the carId
  fetch(`/car-details/${carId}`)
    .then(response => response.json())
    .then(car => {
      // Fill the modal with the car data from the response
      document.getElementById("modalName").textContent = `${car.brand} ${car.model}`;
      document.getElementById("modalType").textContent = car.group;
      document.getElementById("modalEngine").textContent = `${car.engineSize} cc`;
      document.getElementById("modalDoors").textContent = car.doors;
      document.getElementById("modalPassengers").textContent = car.passengers;
      document.getElementById("modalFuel").textContent = car.fuel;
      document.getElementById("modalGearbox").textContent = car.gearbox;
      document.getElementById("modalAC").textContent = car.ac ? "Yes" : "No";
      document.getElementById("modalImage").src = `/images/${car.image}`;

      // Show the modal by changing the display to flex
      document.getElementById("carModal").style.display = "flex";
    })
    .catch(err => {
      console.log("Error fetching car details:", err);
    });
}



// Close Modal function
function closeModal() {
  // Hide the modal
  document.getElementById("carModal").style.display = "none";
}

</script>
<div class="modal" id="carModal">
  <div class="modal-content">
    <h3 id="modalName"></h3>
    <p><strong>Type:</strong> <span id="modalType"></span></p>
    <p><strong>Engine Size:</strong> <span id="modalEngine"></span></p>
    <p><strong>Doors:</strong> <span id="modalDoors"></span></p>
    <p><strong>Passengers:</strong> <span id="modalPassengers"></span></p>
    <p><strong>Fuel Type:</strong> <span id="modalFuel"></span></p>
    <p><strong>Gearbox:</strong> <span id="modalGearbox"></span></p>
    <p><strong>AC:</strong> <span id="modalAC"></span></p>
    <img id="modalImage" style="max-width: 100%; margin-top: 10px; border-radius: 8px;" />
    <button onclick="closeModal()">Close</button>
  </div>
</div>


</body>
</html>
