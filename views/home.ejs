<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Turbo Motors | Home</title>
  <link rel="stylesheet" href="/css/home.css">
  <link rel="stylesheet" href="/css/common_styles.css">
</head>

<body>

  <nav>
    <div class="logo">Turbo Motors</div>
    <ul class="nav-links">
      <li><a href="/home">Home</a></li>
      <li><a href="/allcars">All Cars</a></li>
      <li><a href="/about">About Us</a></li>
      <li><a href="/contact">Contact</a></li>
      <% if (user) { %>
        <li><a href="/logout" class="btn">Logout</a></li>
        <li><a href="/profile" class="btn">Edit Profile</a></li>
        <li><a href="#" class="btn">Hi, <%= user.name %></a></li>
    <% } else { %>
        <li><a href="/login" class="btn">Sign In</a></li>
        <li><a href="/signup" class="btn">Sign Up</a></li>
    <% } %>
    </ul>
  </nav>

  <main>

    <!-- Hero Section -->
    <section class="hero">
      <h1>Drive Luxury Cars<br>At An Affordable Price</h1>
      <a href="/reservation" class="buttons">Rent A Car Now</a>
    </section>

    <!-- Featured Cars Section -->
    <section class="featured-cars container">
      <h2 class="section-title">Check Out Our Large Collection<br>Of Cars In Different Categories</h2>
      <div class="car-gallery">
        <% cars.forEach(car => { %>
          <div class="car-card" onclick="openCarModal('<%= car._id %>')">
            <img src="/images/<%= car.image %>" alt="<%= car.model %>" />
            <p><%= car.group %></p> <!-- Display the group/category of the car -->
          </div>
        <% }) %>
      </div>
    </section>

    <!-- Car Modal -->
    <div id="car-modal" class="modal" onclick="closeCarModal()">
      <div class="modal-content" onclick="event.stopPropagation()">
        <span class="close-btn" onclick="closeCarModal()">&times;</span>
        <h3 id="car-model"></h3>
        <img id="car-image" src="" alt="Car Image" />
        <div id="car-specs">
          <!-- Specifications will be dynamically populated here -->
        </div>
      </div>
    </div>

    <!-- Reviews Section -->
    <section class="reviews container">
      <h2 class="section-title">Why Choose Us?<br>See What Our Customers Say</h2>
      <div class="review-grid">
        <div class="review-card">
          <h3>Jad Hdeife</h3>
          <p class="stars">★★★★★</p>
          <p>"Turbo Motors made my trip unforgettable. Clean car, smooth ride, and excellent service!"</p>
        </div>
        <div class="review-card">
          <h3>Ahmad Hariri</h3>
          <p class="stars">★★★★☆</p>
          <p>"Great customer support and lots of car options. I'll definitely rent again!"</p>
        </div>
        <div class="review-card">
          <h3>Mohammad Serhan</h3>
          <p class="stars">★★★★★</p>
          <p>"Highly recommended! Pickup and return were super easy. The car was in perfect condition."</p>
        </div>
      </div>
      <div class="center-text">
        <a href="/reviews" class="buttons">Reviews Page</a>
      </div>
    </section>

    <!-- Stats Section -->
    <section class="stats container">
      <h2 class="section-title">Our Most Popular Car &<br>Average Daily Rental Fee</h2>
      <p>Most Popular Car: <strong>[Car Name]</strong></p>
      <p>Average Daily Rental Fee: <strong>$XX/day</strong></p>
    </section>

    <!-- About Preview -->
    <section class="about-preview container">
      <h2 class="section-title">Learn More About Our Story</h2>
      <p>Discover how Turbo Motors started and where we're headed next...</p>
      <div class="center-text">
        <a href="/about" class="buttons">Read More</a>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer>
    <div class="container footer-content">
      <p>&copy; 2025 Turbo Motors. All Rights Reserved.</p>
      <p>Follow us on social media: [icons go here]</p>
    </div>
  </footer>

  <script>
    // Function to open the car modal and fetch car specs
    function openCarModal(carId) {
      // Fetch the car details using the car ID
      fetch(`/car/${carId}`)
        .then(response => response.json())
        .then(car => {
          // Populate modal with car details
          document.getElementById("car-model").innerText = `${car.brand} ${car.model}`;
          document.getElementById("car-image").src = "/images/" + car.image; // Correct image path
          document.getElementById("car-specs").innerHTML = `
            <p><strong>Engine Size:</strong> ${car.specs.engineSize} CC</p>
            <p><strong>Doors:</strong> ${car.specs.doors}</p>
            <p><strong>Passengers:</strong> ${car.specs.passengers}</p>
            <p><strong>Fuel Type:</strong> ${car.specs.fuelType}</p>
            <p><strong>Gearbox:</strong> ${car.specs.gearbox}</p>
            <p><strong>AC:</strong> ${car.specs.hasAC ? 'Yes' : 'No'}</p>
            <p><strong>Electric Windows:</strong> ${car.specs.electricWindows ? 'Yes' : 'No'}</p>
            <p><strong>Price Per Day:</strong> $${car.pricePerDay}</p>
          `;
          document.getElementById("car-modal").style.display = 'flex'; // Show the modal
        })
        .catch(err => console.error('Error fetching car data:', err));
    }

    function closeCarModal() {
      document.getElementById("car-modal").style.display = 'none'; // Close the modal
    }
  </script>
</body>

</html>
